{%extends 'base.html'%}
{%block body_block%}

<h1>SocialApp</h1>
<div class="row">
    <div class="col-4"></div>
    <div class="col-4">
        <form action="" method="post" enctype="multipart/form-data">
            {%csrf_token%}
            {{form.as_p}}
            <input type="submit" value="add">
        </form>
    </div>
    <div class="col-4"></div>


<!-- list post -->
<div class="row gx-4 gx-lg-5 justify-content-center">
    {%for p in posts%}
    <div class="col-md-10 col-lg-8 col-xl-7">
        <!-- Post preview-->
        <div class="post-preview">
            <a href="post.html">
                {%if p.image%}
                <div>
                    <img src="{{p.image.url}}" alt="" class="w-100" style="width: 100px;">
                </div>
                {%endif%}
                <h2 class="post-title">{{p.title}}</h2>

            </a>
            <p class="post-meta">
                Posted by
                <a href="#!">{{p.user}}</a>
                on {{p.created_date}}
            </p>
        </div>
        <div class="mt-2">
            <a href="{%url 'like-post' p.id %}" class="btn btn-warning btn-sm">Like</a>
            <!-- {{p}} -->
            <i class="fa-solid fa-heart"></i>{{p.likes}} likes

            <!-- <i class="fa fa-user" aria-hidden="true"></i> -->

            {%for cmt in p.posts_comments%}
            <div class="border rounded-pill p-3 class='w-100' ">
        
                 Comments={{cmt.comment}}
        
                <!-- <i class="fa-solid fa-user"></i> {{p.user}}
                <i class="fa-solid fa-calendar-days"></i> {{p.created_date}} -->
                
            </div>
            {%endfor%}
        </div>
        
        <hr class="my-4" />
    <!-- endlike -->
    <!-- cmnt list -->
    {%for cmnts in p.comment%}
       <div class="row">
        <div class="col-4"></div>
        <div class="col-4">
            <p class="post-meta">
                Posted by
                <a href="#!">{{p.user}}</a>
                on {{p.created_date}}
            </p>
            {{cmnts.comment}}
        </div>
        <div class="col-4"></div>
       </div>
    {%endfor%}
    <!-- endlist -->
    <!-- cmnt -->
    <div>
        <form action="{%url 'add_comment' p.id %}" method="post" >
            {%csrf_token%}
            <input type="text" placeholder="Add comment" name="comment" class="form-control">
            <button type="submit" class="btn btn-outline-info">Add</button>
        </form>
    </div>
</div>    
<!-- end -->
{%endfor%}

{%endblock%}


